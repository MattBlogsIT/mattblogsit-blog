{% comment %}
Shared year archive counting logic
Generates years array and year_data hash for reuse across sidebar and mobile menu
{% endcomment %}

{% assign years = "" | split: "" %}
{% for post in site.posts %}
    {% assign post_year = post.date | date: "%Y" %}
    {% unless years contains post_year %}
        {% assign years = years | push: post_year %}
    {% endunless %}
{% endfor %}

{% assign years = years | sort | reverse %}
{% assign year_data = "" | split: "" %}

{% for year in years %}
    {% assign count = 0 %}
    {% for post in site.posts %}
        {% assign post_year = post.date | date: "%Y" %}
        {% if post_year == year %}
            {% assign count = count | plus: 1 %}
        {% endif %}
    {% endfor %}
    {% assign year_entry = year | append: ":" | append: count %}
    {% assign year_data = year_data | push: year_entry %}
{% endfor %}

{% comment %}
Dynamic navigation that auto-discovers all pages in _pages collection
Maintains dynamic nature - just add pages to _pages folder and they appear
{% endcomment %}

{% assign current_path = page.url %}
{% assign current_collection = page.collection %}

<div class="nav">
  {% comment %} Always show Home first {% endcomment %}
  <a href="{{ site.baseurl }}/" {% if current_path == "/" or current_path == "/index.html" or current_path == site.baseurl or current_path == site.baseurl | append: "/" %}class="active"{% endif %}>Home</a>
  
  {% comment %} Auto-discover all pages in _pages collection {% endcomment %}
  {% assign sorted_pages = site.pages | sort: 'title' %}
  {% for page_item in sorted_pages %}
    {% if page_item.title and page_item.title != "Home" and page_item.title != "Search" %}
      <a href="{{ site.baseurl }}{{ page_item.url }}" {% if current_path == page_item.url %}class="active"{% endif %}>{{ page_item.title }}</a>
    {% endif %}
  {% endfor %}
  
  {% comment %} Always show Posts if there are any {% endcomment %}
  {% if site.posts.size > 0 %}
    <a href="{{ site.baseurl }}/posts/" {% if current_path contains '/posts/' or page.layout == 'post' %}class="active"{% endif %}>Posts</a>
  {% endif %}
  
  {% comment %} Search icon in top right {% endcomment %}
  <span class="search-icon" title="Search" onclick="toggleSearch()">🔍</span>
  <div id="search-dropdown" class="search-dropdown">
    <input type="text" id="search-input" placeholder="Search posts..." autocomplete="off">
    <div id="search-results"></div>
  </div>
</div>


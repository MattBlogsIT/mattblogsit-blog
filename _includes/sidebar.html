{% comment %}
Right sidebar navigation - globally managed
Automatically generates category-based post summaries
{% endcomment %}

<aside class="sidebar">

    {% comment %} Categories Section {% endcomment %}
    <div class="sidebar-section">
        <h3>Categories</h3>
        {% assign categories = site.posts | map: 'categories' | join: ',' | split: ',' | uniq | sort %}
        {% if categories.size > 0 %}
            <ul class="sidebar-categories">
                {% for category in categories %}
                    {% if category != "" %}
                        {% assign category_posts = site.posts | where: 'categories', category %}
                        <li>
                            <a href="{{ site.baseurl }}/category/{{ category | slugify }}/">
                                {{ category | capitalize }} ({{ category_posts.size }})
                            </a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    {% comment %} Archives Section {% endcomment %}
    <div class="sidebar-section">
        <h3>Archives</h3>
        {% assign posts_by_year = site.posts | group_by_exp: 'post', 'post.date | date: "%Y"' %}
        {% if posts_by_year.size > 0 %}
            <ul class="sidebar-archives">
                {% for year_group in posts_by_year %}
                    <li>
                        <a href="{{ site.baseurl }}/archive/{{ year_group.name }}/">
                            {{ year_group.name }} ({{ year_group.items.size }})
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

</aside>
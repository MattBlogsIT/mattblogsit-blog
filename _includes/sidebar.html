{% comment %}
Right sidebar navigation - globally managed
Automatically generates category-based post summaries
{% endcomment %}

<aside class="sidebar">

    {% comment %} Categories Section {% endcomment %}
    <div class="sidebar-section">
        <h3>Categories</h3>
        {% assign categories = site.posts | map: 'categories' | join: ',' | split: ',' | uniq | sort %}
        {% if categories.size > 0 %}
            <ul class="sidebar-categories">
                {% for category in categories %}
                    {% if category != "" %}
                        {% assign category_posts = site.posts | where: 'categories', category %}
                        <li>
                            <a href="{{ site.baseurl }}/category/#{{ category | slugify }}">
                                {{ category }} ({{ category_posts.size }})
                            </a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    {% comment %} Archives Section {% endcomment %}
    <div class="sidebar-section">
        <h3>Archives</h3>
        {% include year-archive-counts.liquid %}
        {% if year_data.size > 0 %}
            <ul class="sidebar-archives">
                {% for entry in year_data %}
                    {% assign parts = entry | split: ":" %}
                    {% assign year = parts[0] %}
                    {% assign count = parts[1] %}
                    <li>
                        <a href="{{ site.baseurl }}/archive/{{ year }}/">
                            {{ year }} ({{ count }})
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

</aside>